name: 'Docker Documentation Generator'
description: 'Automatically generate README documentation from Dockerfiles'
author: 'northcutted'
inputs:
  config:
    description: 'Path to configuration file'
    default: 'dock-docs.yaml'
  output:
    description: 'Output file path'
    default: 'README.md'
runs:
  using: 'composite'
  steps:
    - name: Run dock-docs
      shell: bash
      run: |
        # Get the group ID of the docker socket to allow access
        DOCKER_GID=$(stat -c '%g' /var/run/docker.sock 2>/dev/null || echo "0")
        
        docker run --rm \
          --user $(id -u):$(id -g) \
          --group-add $DOCKER_GID \
          -v /var/run/docker.sock:/var/run/docker.sock \
          -v ${{ github.workspace }}:/github/workspace \
          -w /github/workspace \
          ghcr.io/northcutted/dock-docs:latest \
          --config ${{ inputs.config }} \
          --output ${{ inputs.output }}
